# 订餐者服务设计

## 注册

骑手输入

```
用户名
手机号码
邮箱
登录密码
头像（可为空）
真实姓名
性别
```

订餐者服务首先对参数进行校验

并确定系统中没有相同用户名、手机号、邮箱的订餐者
后方可生成一个订单这ID，将这些信息写入数据库，默认将订餐者的账户状态设置为可用

## 登录

订餐者可以使用

```
用户名
邮箱
手机号
```

中的任一一种以及

```
登录密码
```

来登录，订单者服务将[调用认证服务完成这个过程](../基础设施服务群设计.md#认证)，登录成功后骑手服务返回其一个token，后面订单者的所有请求，都必须携带这个token

## 收货信息

### 新增收货信息

调用者传递

```
token
收货地址建筑物（小区、学校）
详细地址
是否设置为默认地址
```

如果是否默认地址为真，需要将该用户的先前默认地址设置为false
然后订餐者服务将[根据token调用认证服务取得用户ID](./../基础设施服务群设计.md#鉴权)，将上面所传的信息进行入库

### 拉取收货信息列表

调用者传递token，订餐者服务[根据token调用认证服务取得用户ID](./../基础设施服务群设计.md#鉴权)
根据用户ID返回用户的收货信息列表

### 拉取用户默认收货信息

传递

```
token
```

订餐者服务[根据token调用认证服务取得用户ID](./../基础设施服务群设计.md#鉴权)
根据用户ID返回用户的默认收货信息

### 使用用户ID拉取默认收货信息

传递

```
用户ID
```

返回

```
默认收货信息
```

### 根据收货信息ID拉取

传递

```
收货信息ID
```

返回

```
收货信息
```

### 修改收货信息

调用者传递

```
token
收货信息ID
收货地址建筑物（小区、学校）
详细地址
是否设置为默认地址
```

如果是否默认地址为真，需要将该用户的先前默认地址设置为false
然后订餐者服务将[根据token调用认证服务取得用户ID](./../基础设施服务群设计.md#鉴权)，将上面所传的信息进行更新

## 拉取用户信息

传递

```
token
```

返回

```
头像
真实姓名
手机号码
邮箱
```

## 更改用户信息

订餐者可传递

```
token
头像
用户名
收货地址
手机号码
```

订餐者服务进行校验，校验通过后将用户信息进行更新

## 修改密码

订餐者传递

```token
旧密码
新密码
```

订单者服务校验旧密码与原密码是否一致，相同则进行修改，否则拒绝修改